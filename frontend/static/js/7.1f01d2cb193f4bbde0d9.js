webpackJsonp([7],{DxMO:function(e,t){},Hreh:function(e,t){},tON4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("JF9t"),n=a("CCn6"),_={components:{CardBox:function(){return new Promise(function(e){e()}).then(a.bind(null,"B2nC"))}},data:function(){return{search_input:{left_search:"",right_search:""},right_search_flag:!1,unbind_case_table_data:[],unbind_case_total_count:0,left_page_size:10,left_current_page:1,left_total_count:0,bind_case_table_data:[],search_bind_case_table_data:[],right_page_size:10,right_current_page:1,right_total_count:0,left_select_case:[],right_select_case:[]}},methods:{handle_search:function(){var e=this,t={case_name:this.search_input.left_search,page:this.left_current_page,pageSize:this.left_page_size,user_id:Object(i.a)("user_id")};n.a.config_manage_api.check_case_info(t).then(function(t){0===t.status?(e.unbind_case_total_count=t.total_count,e.unbind_case_table_data=t.info):e.$message.error("系统异常，请联系管理员！")})},right_handle_size_change:function(e){this.right_page_size=e},right_handle_current_change:function(e){this.right_current_page=e},left_handle_size_change:function(e){this.left_page_size=e,this.handle_search()},left_handle_current_change:function(e){this.left_current_page=e,this.handle_search()},reset_left_search:function(){this.search_input.left_search="",this.left_handle_current_change(1)},right_search:function(){var e=this;this.search_bind_case_table_data=[],this.bind_case_table_data.forEach(function(t){t.case_name.indexOf(e.search_input.right_search)>-1&&e.search_bind_case_table_data.push(t)}),this.right_current_page=1,this.right_search_flag=!0},right_reset_search:function(){this.right_search_flag=!1,this.search_bind_case_table_data=[],this.search_input.right_search="",this.right_current_page=1},left_selected:function(e){this.left_select_case=e},handle_bind:function(){var e=this,t=this.left_select_case.filter(function(t){return e.bind_case_table_data.indexOf(t)<0});this.bind_case_table_data=this.bind_case_table_data.concat(t).sort(function(e,t){return t.case_id-e.case_id});var a=this.left_select_case.filter(function(t){return e.search_bind_case_table_data.indexOf(t)<0});this.right_search_flag&&(this.search_bind_case_table_data=this.search_bind_case_table_data.concat(a).sort(function(e,t){return t.case_id-e.case_id})),this.left_current_page=1,this.right_handle_current_change(1)},get_case_rate:function(e){var t=this;this.loading_query_rate=!0;var a=[];this.bind_case_table_data.forEach(function(e){a.push(e.case_id)});var i={offer_id:e,case_id_list:a};n.a.config_manage_api.query_case_rate(i).then(function(e){if(0===e.status){var a={};a.rate_info=e.info,t.$emit("next_step","step_two",a)}else t.$message.error("系统异常，请联系管理员！");t.loading_query_rate=!0})},right_selected:function(e){this.right_select_case=e},handle_unbind:function(){this.remove_right_selected(this.right_select_case),this.right_handle_current_change(1)},remove_right_selected:function(e){Array.prototype.diff=function(e){return this.filter(function(t){return e.indexOf(t)<0})},this.bind_case_table_data=this.bind_case_table_data.diff(e),this.right_search_flag&&(this.search_bind_case_table_data=this.bind_case_table_data.diff(e))}},mounted:function(){this.left_handle_current_change(1)}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[[a("div",{staticClass:"steq_panel_form"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",[a("CardBox",{attrs:{title:"选择测试用例"}},[a("template",{slot:"body"},[a("div",{staticClass:"search_box"},[a("el-input",{staticStyle:{width:"219px"},attrs:{placeholder:"请输入用例名称","suffix-icon":"el-icon-search",size:"small"},model:{value:e.search_input.left_search,callback:function(t){e.$set(e.search_input,"left_search",t)},expression:"search_input.left_search"}}),e._v(" "),a("div",[a("el-button",{staticStyle:{background:"none"},attrs:{type:"primary",plain:"",size:"small"},on:{click:e.reset_left_search}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.left_handle_current_change(1)}}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"search_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.unbind_case_table_data,border:"",size:"small"},on:{"selection-change":e.left_selected}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"case_id",label:"测试用例ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"case_name",label:"测试用例名称","show-overflow-tooltip":!0}})],1)],1),e._v(" "),a("div",{staticClass:"search_pagination"},[a("el-pagination",{attrs:{"current-page":e.left_current_page,"page-sizes":[5,10,15],"page-size":e.left_page_size,layout:"sizes, prev, pager, next",total:e.unbind_case_total_count},on:{"size-change":e.left_handle_size_change,"current-change":e.left_handle_current_change,"update:currentPage":function(t){e.left_current_page=t},"update:current-page":function(t){e.left_current_page=t}}})],1)])],2)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"search_option"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-right"},on:{click:e.handle_bind}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-arrow-left"},on:{click:e.handle_unbind}})],1)]),e._v(" "),a("el-col",[a("CardBox",{attrs:{title:"确认绑定"}},[a("template",{slot:"body"},[a("div",{staticClass:"search_box"},[a("el-input",{staticStyle:{width:"219px"},attrs:{placeholder:"请输入用例名称","suffix-icon":"el-icon-search",size:"small"},model:{value:e.search_input.right_search,callback:function(t){e.$set(e.search_input,"right_search",t)},expression:"search_input.right_search"}}),e._v(" "),a("div",[a("el-button",{staticStyle:{background:"none"},attrs:{type:"primary",plain:"",size:"small"},on:{click:e.right_reset_search}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.right_search}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"search_table"},[e.right_search_flag?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.search_bind_case_table_data.slice((e.right_current_page-1)*e.right_page_size,e.right_current_page*e.right_page_size),border:"",size:"small"},on:{"selection-change":e.right_selected}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"case_id",label:"测试用例ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"case_name",label:"测试用例名称","show-overflow-tooltip":!0}})],1),e._v(" "),a("div",{staticClass:"search_pagination"},[a("el-pagination",{attrs:{"current-page":e.right_current_page,"page-sizes":[5,10,15],"page-size":e.right_page_size,layout:"sizes, prev, pager, next",total:e.search_bind_case_table_data.length},on:{"size-change":e.right_handle_size_change,"current-change":e.right_handle_current_change,"update:currentPage":function(t){e.right_current_page=t},"update:current-page":function(t){e.right_current_page=t}}})],1)],1):a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bind_case_table_data.slice((e.right_current_page-1)*e.right_page_size,e.right_current_page*e.right_page_size),border:"",size:"small"},on:{"selection-change":e.right_selected}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"case_id",label:"测试用例ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"case_name",label:"测试用例名称","show-overflow-tooltip":!0}})],1),e._v(" "),a("div",{staticClass:"search_pagination"},[a("el-pagination",{attrs:{"current-page":e.right_current_page,"page-sizes":[5,10,15],"page-size":e.right_page_size,layout:"sizes, prev, pager, next",total:e.bind_case_table_data.length},on:{"size-change":e.right_handle_size_change,"current-change":e.right_handle_current_change,"update:currentPage":function(t){e.right_current_page=t},"update:current-page":function(t){e.right_current_page=t}}})],1)],1)])])],2)],1)],1)],1)]],2)},staticRenderFns:[]};var s=a("VU/8")(_,r,!1,function(e){a("DxMO"),a("Hreh")},"data-v-3c673e18",null);t.default=s.exports}});
//# sourceMappingURL=7.1f01d2cb193f4bbde0d9.js.map